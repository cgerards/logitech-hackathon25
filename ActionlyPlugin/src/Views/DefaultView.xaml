<UserControl x:Class="Loupedeck.ActionlyPlugin.Views.DefaultView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             Width="400" Height="150" Padding="5">
    <StackPanel Margin="0,0,0,0" Background="Transparent">
        <!-- Header with Logo -->
        <Grid Margin="0,0,0,2">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <!-- Logo -->
            <Image Grid.Column="0" 
                   Width="50" 
                   Height="50" 
                   Margin="0,0,8,0"
                   VerticalAlignment="Top"
                   Source="actionly-logo.png"
                   Stretch="Uniform"/>

            <!-- Text -->
            <StackPanel Grid.Column="1" VerticalAlignment="Center">
                <TextBlock Text="Welcome!" Foreground="White" FontWeight="Bold" FontSize="22"/>
                <TextBlock Text="Tell the Agent the task he should handle" Foreground="#FFD0D0D0"  FontSize="16" TextWrapping="Wrap" Margin="0,2,0,0"/>
            </StackPanel>

            <Button Grid.Column="2" x:Name="CloseTopButton" Width="28" Height="22" HorizontalAlignment="Right" VerticalAlignment="Top"
        Margin="0,0,0,0" Padding="0" Background="Transparent" BorderBrush="Transparent" Click="CloseButton_Click"
        ToolTip="Close">
                <Grid>
                    <Ellipse Fill="Transparent" />
                    <TextBlock Text="✕" Foreground="#FFD0D0D0" FontSize="15" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                </Grid>
                <Button.Style>
                    <Style TargetType="Button">
                        <Setter Property="Background" Value="Transparent"/>
                        <Setter Property="Cursor" Value="Hand"/>
                        <Style.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Foreground" Value="#22FFFFFF"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </Button.Style>
            </Button>
        </Grid>
        <!-- Text field with paperplane submit button -->
        <Grid Margin="5,2,5,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="36" />
            </Grid.ColumnDefinitions>

            <!-- Multiline textbox with placeholder -->
            <Grid Grid.Column="0">
                <TextBox x:Name="InnerInputTextBox" 
                         MinWidth="180" 
                         MinLines="4" 
                         AcceptsReturn="True" 
                         TextWrapping="Wrap" 
                         Background="#FF1E1E1E" 
                         Foreground="White" 
                         BorderBrush="#FF3E3E42" 
                         Padding="6" 
                         VerticalContentAlignment="Top"/>

                <!-- Placeholder text -->
                <TextBlock x:Name="PlaceholderText"
                           Text="Type your request here... (Ctrl+Enter to send)"
                           Foreground="#FF808080"
                           IsHitTestVisible="False"
                           Margin="8,8,8,0"
                           VerticalAlignment="Top">
                    <TextBlock.Style>
                        <Style TargetType="TextBlock">
                            <Setter Property="Visibility" Value="Collapsed"/>
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding Text, ElementName=InnerInputTextBox}" Value="">
                                    <Setter Property="Visibility" Value="Visible"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </TextBlock.Style>
                </TextBlock>
            </Grid>

            <!-- Send button -->
            <Button x:Name="SendButton" 
                    Grid.Column="1" 
                    Width="32" 
                    Height="28" 
                    Margin="6,0,0,0" 
                    ToolTip="Send (Ctrl+Enter)" 
                    Background="#FF2A8BF2" 
                    BorderBrush="#FF1F6FCF" 
                    Foreground="White" 
                    HorizontalAlignment="Center" 
                    VerticalAlignment="Center" 
                    Click="SendButton_Click"
                    IsEnabled="True"
                    AutomationProperties.Name="Send request">
                <Path Data="M2,21 L23,12 L2,3 L8,12 L2,21 Z" Fill="White" Stretch="Uniform" Width="14" Height="14" RenderTransformOrigin="0.5,0.5">
                    <Path.RenderTransform>
                        <RotateTransform Angle="-35"/>
                    </Path.RenderTransform>
                </Path>
                <Button.Style>
                    <Style TargetType="Button">
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="Button">
                                    <Border Background="{TemplateBinding Background}" CornerRadius="6">
                                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                    </Border>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                        <Setter Property="Cursor" Value="Hand"/>
                        <Style.Triggers>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter Property="Opacity" Value="0.4"/>
                                <Setter Property="Cursor" Value="Arrow"/>
                            </Trigger>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Opacity" Value="0.9"/>
                                <Setter Property="RenderTransform">
                                    <Setter.Value>
                                        <ScaleTransform ScaleX="1.03" ScaleY="1.03"/>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </Button.Style>
            </Button>
        </Grid>
    </StackPanel>
</UserControl>