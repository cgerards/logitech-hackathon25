<Window x:Class="Loupedeck.ActionlyPlugin.PopUpWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="" Height="170" Width="300"
        WindowStyle="None" AllowsTransparency="True" Background="Transparent"
        ShowInTaskbar="False" Topmost="True" Loaded="Window_Loaded">
    <Border CornerRadius="8" Background="#FF2D2D30" Padding="8" Effect="{DynamicResource _DropShadow}">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="26" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <!-- Top-right Close X -->
            <Button Grid.Row="0" x:Name="CloseTopButton" Width="28" Height="22" HorizontalAlignment="Right" VerticalAlignment="Top"
                    Margin="0,0,0,0" Padding="0" Background="Transparent" BorderBrush="Transparent" Click="Close_Click"
                    ToolTip="Close">
                <Grid>
                    <Ellipse Fill="Transparent" />
                    <TextBlock Text="✕" Foreground="#FFD0D0D0" FontSize="12" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                </Grid>
                <Button.Style>
                    <Style TargetType="Button">
                        <Setter Property="Background" Value="Transparent"/>
                        <Setter Property="Cursor" Value="Hand"/>
                        <Style.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#22FFFFFF"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </Button.Style>
            </Button>

            <!-- Content -->
            <StackPanel Grid.Row="1" Margin="6,6,6,6">
                <TextBlock Text="Action Wheel Popup" Foreground="White" FontWeight="Bold" FontSize="14"/>
                <TextBlock Text="This is an example popup anchored near the button." Foreground="#FFD0D0D0" TextWrapping="Wrap" Margin="0,8,0,0"/>

                <!-- Text field with paperplane submit button -->
                <Grid Margin="0,8,0,0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="36" />
                    </Grid.ColumnDefinitions>

                    <TextBox x:Name="InputTextBox" Grid.Column="0" MinWidth="180" Height="28"
                             Background="#FF1E1E1E" Foreground="White" BorderBrush="#FF3E3E42"
                             Padding="8,0" VerticalContentAlignment="Center" KeyDown="InputTextBox_KeyDown"/>

                    <Button Grid.Column="1" Width="32" Height="28" Margin="6,0,0,0" Click="Ok_Click" ToolTip="Send"
                            Background="#FF2A8BF2" BorderBrush="#FF1F6FCF" Foreground="White" HorizontalAlignment="Center" VerticalAlignment="Center">
                        <Path Data="M2,21 L23,12 L2,3 L8,12 L2,21 Z" Fill="White" Stretch="Uniform" Width="14" Height="14" RenderTransformOrigin="0.5,0.5">
                            <Path.RenderTransform>
                                <RotateTransform Angle="-35"/>
                            </Path.RenderTransform>
                        </Path>
                        <Button.Style>
                            <Style TargetType="Button">
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="Button">
                                            <Border Background="{TemplateBinding Background}" CornerRadius="6">
                                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                            </Border>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                                <Setter Property="Cursor" Value="Hand"/>
                                <Style.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter Property="Opacity" Value="0.9"/>
                                        <Setter Property="RenderTransform">
                                            <Setter.Value>
                                                <ScaleTransform ScaleX="1.03" ScaleY="1.03"/>
                                            </Setter.Value>
                                        </Setter>
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </Button.Style>
                    </Button>
                </Grid>
            </StackPanel>
        </Grid>
    </Border>
</Window>